## 线程同步精要

尽量最低程度地共享对象，减少需要同步的场合

使用高级的并发编程构件

使用底层的同步原语，只用非递归的互斥器和条件变量



### 互斥器(mutex)

用RALL手法封装mutex的创建，销毁  加锁  解锁

非递归的mutex

不手工使用lock()和unlock()函数，一切交给栈上的Guard对象的构造和析构，Guard对象的生命周期正好等于临界区，这样我们保证在同一个函数，同一个scope理对某个mutex加锁和解锁，避免出现跨地域的加锁，以免出现死锁的情况

**只使用非递归的mutex**

同一个线程可以重复对recursive mutex加锁，但不可以重复对non-rescursive mutex加锁



### 条件变量(condition variable)

一个或多个线程等待某个布尔表达式为真，即等待别的线程唤醒它